# Mysql

## 概述

### 数据库

数据的仓库

在计算机中，以一定的形式组织和管理数据的软件

### 数据库的分类

#### 关系型数据库

关系型数据库底层基于关系表的

关系表就是一个二维表，有行和列组成。

在关系表中，列称为字段，用来指示记录的类别；行称为记录，记录时数据的基本的单位。

常见的关系型数据库：

MySQL：开源免费的

Oracle：商业数据库，大型的面向对象的关系型数据库

MS SQL Server：微软的数据库，收费，只能运行在Windows平台上

SQLite：基于文件的微型的关系型数据库

#### 非关系型数据库

非关系型数据库底层不是基于关系表的

可以基于键值对

常见的非关系型数据库：

Redis：基于键值对的内存型数据库，快

MongoDB：基于键值对的文档行数据库

## SQL语句

结构化查询语句，专门用来操作关系型数据库的。

非关系型数据库不需要使用SQL语句，所以称为noSQL数据库。

SQL语句在不同的关系型数据库中，会有一些差别，称为数据库的方言。

SQL语句大体分为四类：

1） DDL：数据定义语言，创建、删除、修改数据库、数据表的。

2） DML：数据管理语言，对数据表中的数据进行增加、删除、修改操作。

3） DQL：数据查询语言，对数据表中的数据进行查询操作。

4） DCL：数据控制语言，对数据库的权限、角色等进行操作。

### 查询

```sql
select 字段列表 from 表名
where 条件
group by 字段，字段，...
having 条件
order by 字段，字段 desc, ...
limit m,n;
```

Select执行的过程：

1） 先从表中根据Where提取数据。

2） 再进行分组。

3） 分组后，再进行having筛选。

注：

1）使用通配符*查询的效率低 （在使用 * 时，会先去获取表中所有字段，然后再构建sql）

2）可以使用 as 为表，字段添加别名（as 可以省略）。**表使用了别名之后，不可以再使用原名字**

**五大子句**

- where子句：条件查询

- group by：分组

  使用group by 在查询到的数据中，进行分组，指定字段相同的记录会被合并到一起。（常与聚合函数联用）

  ```sql
  group by 字段名,...
  group by 1,2,...   //字段的下标，从1开始
  ```

  

- having：过滤

  having后面跟的也是条件，与where不同，having的条件是在分组之后进行筛选。

  **where和having的区别**

  1）语法：where写在group by的前面，having写在group by的后面

  2）执行：where先执行，having是在分组后执行

  3）聚合：where不能与聚合函数联用，having可以

  注意：group by 可以没有，where 后面也可以跟having。但是where必须在having之前

- order by：排序

  对查询结果进行排序

  1) asc表示升序，desc降序，asc可以省略
  2) 排序时可以有多个字段，首先按第一个字段进行排序，当第一字段的值存在相同时，这时再按第二字段进行排序。

- limit：限制结果数量

  对查询记录进行截取

  limit n;     //从下标为0 的记录提取，总共提取n条记录

  limit m,n;     //从下标为m 的记录提取，总共提取n条记录

### 聚合函数

1. count() 

   统计数量，count(字段)统计查询结果中字段的数量，忽略非空值。

   count(*)和count(1)统计查询结果的总数（count(1) 效率高 ,1代表第一个字段）

2. sum()

3. avg()

4. max()

5. min()

可以对查询结果进行聚合运算，也可以与分组进行联用，此时以组为单位进行聚合。

聚合函数在运算时会忽略null值。

